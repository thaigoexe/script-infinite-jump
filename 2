-- Variáveis globais
local JumpHeight = 50  -- Altura do pulo
local InfiniteJumpEnabled = true  -- Habilita o pulo infinito

-- Serviços do Roblox
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Função para verificar se o personagem é R6
local function isR6(character)
    return character:FindFirstChild("Torso") and character:FindFirstChild("Head")
end

-- Função para aplicar o pulo infinito a um jogador
local function applyInfiniteJump(player)
    -- Verifica se o jogador tem um personagem e se é R6
    player.CharacterAdded:Connect(function(character)
        if isR6(character) then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            local rootPart = character:FindFirstChild("HumanoidRootPart")

            if humanoid and rootPart then
                humanoid.JumpHeight = JumpHeight  -- Define a altura do pulo

                -- Detecta a tecla de pulo (Espaço)
                UIS.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.Space then
                        -- Se o jogador estiver no ar, mantém o pulo infinito
                        if humanoid:GetState() == Enum.HumanoidStateType.Jumping or humanoid:GetState() == Enum.HumanoidStateType.Freefall then
                            -- Aplica uma força de pulo no personagem
                            rootPart.Velocity = Vector3.new(0, JumpHeight, 0)  -- Ajusta a velocidade para pulo contínuo
                        end
                    end
                end)

                -- Continua a aplicar a força de pulo durante o estado "Freefall"
                RunService.Heartbeat:Connect(function(_, dt)
                    if humanoid:GetState() == Enum.HumanoidStateType.Freefall then
                        -- Aplica uma força de pulo contínuo para manter o jogador no ar
                        rootPart.Velocity = Vector3.new(0, JumpHeight, 0)
                    end
                end)
            end
        end
    end)
end

-- Função para aplicar o pulo infinito a todos os jogadores no servidor
local function applyToAllPlayers()
    -- Aplica para todos os jogadores já presentes no servidor
    for _, player in ipairs(Players:GetPlayers()) do
        if player.Character then
            applyInfiniteJump(player)  -- Aplica o pulo infinito ao jogador
        else
            player.CharacterAdded:Connect(function(character)
                applyInfiniteJump(player)  -- Aplica quando o personagem for adicionado
            end)
        end
    end

    -- Aplica pulo infinito a jogadores que entrarem no servidor
    Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(character)
            applyInfiniteJump(player)  -- Aplica pulo infinito quando o jogador entra
        end)
    end)
end

-- Inicializa o pulo infinito para todos os jogadores
applyToAllPlayers()
